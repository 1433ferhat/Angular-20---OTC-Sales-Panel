<div class="customer-create-page">
  <div class="page-header">
    <h1>
      <mat-icon>{{ isEditing ? 'edit' : 'person_add' }}</mat-icon>
      {{ isEditing ? 'Müşteri Düzenle' : 'Yeni Müşteri Ekle' }}
    </h1>
  </div>

  <mat-card class="form-card">
    <mat-card-content>
      <div class="form-grid">
        <!-- Temel Bilgiler -->
        <mat-form-field appearance="outline">
          <mat-label>Ad Soyad *</mat-label>
          <input matInput [(ngModel)]="customerForm.name" required>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Cep Telefonu *</mat-label>
          <input matInput [(ngModel)]="customerForm.phone" required>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>E-Posta *</mat-label>
          <input matInput type="email" [(ngModel)]="customerForm.email" required>
        </mat-form-field>

        <!-- Fiyat Tipi -->
        <mat-form-field appearance="outline">
          <mat-label>Fiyat Tipi *</mat-label>
          <mat-select [(ngModel)]="customerForm.priceType" required>
            <mat-option *ngFor="let option of getPriceTypeOptions()" [value]="option.value">
              {{ option.label }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Müşteri Tipi -->
        <div class="customer-type-section">
          <label>Müşteri Tipi *</label>
          <mat-radio-group [value]="isCorporate()" (change)="onCustomerTypeChange($event.value)">
            <mat-radio-button [value]="false">Bireysel</mat-radio-button>
            <mat-radio-button [value]="true">Kurumsal</mat-radio-button>
          </mat-radio-group>
        </div>

        <!-- Bireysel Müşteri -->
        @if (!isCorporate()) {
          <mat-form-field appearance="outline">
            <mat-label>T.C. Kimlik No *</mat-label>
            <input matInput 
                   [(ngModel)]="customerForm.tcNo" 
                   maxlength="11" 
                   pattern="[0-9]*"
                   required>
            <mat-hint>11 haneli T.C. kimlik numarası</mat-hint>
          </mat-form-field>
        }

        <!-- Kurumsal Müşteri -->
        @if (isCorporate()) {
          <mat-form-field appearance="outline">
            <mat-label>Vergi Dairesi *</mat-label>
            <input matInput [(ngModel)]="customerForm.taxOffice" required>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Vergi Numarası *</mat-label>
            <input matInput 
                   [(ngModel)]="customerForm.taxNo" 
                   maxlength="10"
                   pattern="[0-9]*"
                   required>
            <mat-hint>10 haneli vergi numarası</mat-hint>
          </mat-form-field>
        }

        <!-- E-Fatura -->
        <div class="einvoice-section">
          <mat-checkbox [(ngModel)]="customerForm.isEInvoice">
            E-Fatura Mükellefi
          </mat-checkbox>
        </div>
      </div>
    </mat-card-content>

    <mat-card-actions>
      <button mat-button (click)="cancel()" [disabled]="isLoading">
        <mat-icon>close</mat-icon>
        İptal
      </button>
      <button mat-raised-button color="primary" [disabled]="!isFormValid() || isLoading" (click)="save()">
        <mat-icon>save</mat-icon>
        {{ isEditing ? 'Güncelle' : 'Kaydet' }}
      </button>
    </mat-card-actions>
  </mat-card>
</div>